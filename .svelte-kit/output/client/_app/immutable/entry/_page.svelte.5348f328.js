import{S as D,i as O,s as V,k as C,l as R,m as L,h as $,b,v as B,d as h,f as N,g as v,K as q,w as F,L as W,y as G,z as I,A as w,M as J,B as E,q as P,r as H,a as M,c as U,n as S,H as y,N as Q,O as oe,I as T,u as re,o as se}from"../chunks/index.36c52fec.js";import{I as z,F as le,a as x,C as ae,T as A,g as ie,b as ue,m as ee,c as te,d as ce,e as X,u as ne,i as K,h as fe,f as me,s as pe,M as _e,W as $e,r as Z,j as de,k as ge}from"../chunks/MainGamePage.993b28ce.js";import"../chunks/paths.49ea4c95.js";function be(a){let e,n,t;function o(r){a[6](r)}let u={placeholder:"Enter User Name",$$slots:{default:[ve]},$$scope:{ctx:a}};return a[1]!==void 0&&(u.value=a[1]),e=new z({props:u}),F.push(()=>W(e,"value",o)),e.$on("click",a[3]),{c(){G(e.$$.fragment)},l(r){I(e.$$.fragment,r)},m(r,i){w(e,r,i),t=!0},p(r,i){const c={};i&256&&(c.$$scope={dirty:i,ctx:r}),!n&&i&2&&(n=!0,c.value=r[1],J(()=>n=!1)),e.$set(c)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){h(e.$$.fragment,r),t=!1},d(r){E(e,r)}}}function he(a){let e,n,t;function o(r){a[4](r)}let u={placeholder:"Enter API Key",$$slots:{default:[ke]},$$scope:{ctx:a}};return a[0]!==void 0&&(u.value=a[0]),e=new z({props:u}),F.push(()=>W(e,"value",o)),e.$on("click",a[5]),{c(){G(e.$$.fragment)},l(r){I(e.$$.fragment,r)},m(r,i){w(e,r,i),t=!0},p(r,i){const c={};i&256&&(c.$$scope={dirty:i,ctx:r}),!n&&i&1&&(n=!0,c.value=r[0],J(()=>n=!1)),e.$set(c)},i(r){t||(v(e.$$.fragment,r),t=!0)},o(r){h(e.$$.fragment,r),t=!1},d(r){E(e,r)}}}function ve(a){let e;return{c(){e=P("Confirm")},l(n){e=H(n,"Confirm")},m(n,t){b(n,e,t)},d(n){n&&$(e)}}}function ke(a){let e;return{c(){e=P("Confirm")},l(n){e=H(n,"Confirm")},m(n,t){b(n,e,t)},d(n){n&&$(e)}}}function Ce(a){let e,n,t,o;const u=[he,be],r=[];function i(c,s){return c[2]?1:0}return n=i(a),t=r[n]=u[n](a),{c(){e=C("div"),t.c()},l(c){e=R(c,"DIV",{});var s=L(e);t.l(s),s.forEach($)},m(c,s){b(c,e,s),r[n].m(e,null),o=!0},p(c,[s]){let m=n;n=i(c),n===m?r[n].p(c,s):(B(),h(r[m],1,1,()=>{r[m]=null}),N(),t=r[n],t?t.p(c,s):(t=r[n]=u[n](c),t.c()),v(t,1),t.m(e,null))},i(c){o||(v(t),o=!0)},o(c){h(t),o=!1},d(c){c&&$(e),r[n].d()}}}function Re(a,e,n){let t="",o="",u=!1;const r=q();function i(){r("received",{apikey:t,username:o})}function c(p){t=p,n(0,t)}const s=()=>{n(2,u=!0)};function m(p){o=p,n(1,o)}return[t,o,u,i,c,s,m]}class Ge extends D{constructor(e){super(),O(this,e,Re,Ce,V,{})}}function Ie(a){let e;return{c(){e=P("Generate")},l(n){e=H(n,"Generate")},m(n,t){b(n,e,t)},d(n){n&&$(e)}}}function we(a){let e;return{c(){e=P("Let's Go")},l(n){e=H(n,"Let's Go")},m(n,t){b(n,e,t)},d(n){n&&$(e)}}}function Ee(a){let e,n,t,o,u,r,i,c,s,m,p,d,k,l;return e=new ae({props:{imageSource:a[1]}}),s=new A({props:{$$slots:{default:[Ie]},$$scope:{ctx:a}}}),s.$on("click",a[2]),p=new A({props:{$$slots:{default:[we]},$$scope:{ctx:a}}}),p.$on("click",a[3]),{c(){G(e.$$.fragment),n=M(),t=C("h3"),o=P("Get Creative"),u=M(),r=C("input"),i=M(),c=C("div"),G(s.$$.fragment),m=M(),G(p.$$.fragment),this.h()},l(f){I(e.$$.fragment,f),n=U(f),t=R(f,"H3",{});var g=L(t);o=H(g,"Get Creative"),g.forEach($),u=U(f),r=R(f,"INPUT",{}),i=U(f),c=R(f,"DIV",{class:!0});var _=L(c);I(s.$$.fragment,_),m=U(_),I(p.$$.fragment,_),_.forEach($),this.h()},h(){S(c,"class","bottom-buttons")},m(f,g){w(e,f,g),b(f,n,g),b(f,t,g),y(t,o),b(f,u,g),b(f,r,g),Q(r,a[0]),b(f,i,g),b(f,c,g),w(s,c,null),y(c,m),w(p,c,null),d=!0,k||(l=oe(r,"input",a[4]),k=!0)},p(f,g){const _={};g&2&&(_.imageSource=f[1]),e.$set(_),g&1&&r.value!==f[0]&&Q(r,f[0]);const j={};g&128&&(j.$$scope={dirty:g,ctx:f}),s.$set(j);const Y={};g&128&&(Y.$$scope={dirty:g,ctx:f}),p.$set(Y)},i(f){d||(v(e.$$.fragment,f),v(s.$$.fragment,f),v(p.$$.fragment,f),d=!0)},o(f){h(e.$$.fragment,f),h(s.$$.fragment,f),h(p.$$.fragment,f),d=!1},d(f){E(e,f),f&&$(n),f&&$(t),f&&$(u),f&&$(r),f&&$(i),f&&$(c),E(s),E(p),k=!1,l()}}}function Le(a){let e,n,t;return n=new le({props:{title:"Your Artwork",$$slots:{default:[Ee]},$$scope:{ctx:a}}}),{c(){e=C("div"),G(n.$$.fragment)},l(o){e=R(o,"DIV",{});var u=L(e);I(n.$$.fragment,u),u.forEach($)},m(o,u){b(o,e,u),w(n,e,null),t=!0},p(o,[u]){const r={};u&131&&(r.$$scope={dirty:u,ctx:o}),n.$set(r)},i(o){t||(v(n.$$.fragment,o),t=!0)},o(o){h(n.$$.fragment,o),t=!1},d(o){o&&$(e),E(n)}}}function Pe(a,e,n){const t=q();let o="";x.subscribe(m=>{o=m});let u="",r="";async function i(){n(1,r=await ie(u,o,ue.SMALL))}function c(){const m={imageURL:r,imagePrompt:u};console.log("HostGenerate. Generation."),console.log(m),ee.set(m.imagePrompt),te.set(m.imageURL),t("generated",{mainGeneration:m})}function s(){u=this.value,n(0,u)}return[u,r,i,c,s]}class He extends D{constructor(e){super(),O(this,e,Pe,Le,V,{})}}function ye(a){let e,n;return e=new He({}),e.$on("generated",a[9]),{c(){G(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){w(e,t,o),n=!0},p:T,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Se(a){let e,n;return e=new Ge({}),e.$on("received",a[8]),{c(){G(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){w(e,t,o),n=!0},p:T,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Me(a){let e,n,t,o,u,r,i,c,s,m,p;o=new A({props:{$$slots:{default:[Ue]},$$scope:{ctx:a}}}),o.$on("click",a[5]);function d(l){a[6](l)}let k={placeholder:"Enter Room Code",$$slots:{default:[Te]},$$scope:{ctx:a}};return a[0]!==void 0&&(k.value=a[0]),s=new z({props:k}),F.push(()=>W(s,"value",d)),s.$on("click",a[7]),{c(){e=C("h1"),n=P("BITS&BOTS"),t=M(),G(o.$$.fragment),u=M(),r=C("p"),i=P("OR"),c=M(),G(s.$$.fragment),this.h()},l(l){e=R(l,"H1",{class:!0});var f=L(e);n=H(f,"BITS&BOTS"),f.forEach($),t=U(l),I(o.$$.fragment,l),u=U(l),r=R(l,"P",{class:!0});var g=L(r);i=H(g,"OR"),g.forEach($),c=U(l),I(s.$$.fragment,l),this.h()},h(){S(e,"class","svelte-1adcpsd"),S(r,"class","svelte-1adcpsd")},m(l,f){b(l,e,f),y(e,n),b(l,t,f),w(o,l,f),b(l,u,f),b(l,r,f),y(r,i),b(l,c,f),w(s,l,f),p=!0},p(l,f){const g={};f&16384&&(g.$$scope={dirty:f,ctx:l}),o.$set(g);const _={};f&16384&&(_.$$scope={dirty:f,ctx:l}),!m&&f&1&&(m=!0,_.value=l[0],J(()=>m=!1)),s.$set(_)},i(l){p||(v(o.$$.fragment,l),v(s.$$.fragment,l),p=!0)},o(l){h(o.$$.fragment,l),h(s.$$.fragment,l),p=!1},d(l){l&&$(e),l&&$(t),E(o,l),l&&$(u),l&&$(r),l&&$(c),E(s,l)}}}function Ue(a){let e;return{c(){e=P("Get Started")},l(n){e=H(n,"Get Started")},m(n,t){b(n,e,t)},d(n){n&&$(e)}}}function Te(a){let e;return{c(){e=P("Join Room")},l(n){e=H(n,"Join Room")},m(n,t){b(n,e,t)},d(n){n&&$(e)}}}function De(a){let e,n,t,o,u;const r=[Me,Se,ye],i=[];function c(s,m){return s[1]==s[2].Landing?0:s[1]==s[2].CredentialingHost||s[1]==s[2].CredentialingGuest?1:s[1]==s[2].HostGenerating?2:-1}return~(t=c(a))&&(o=i[t]=r[t](a)),{c(){e=C("div"),n=C("div"),o&&o.c(),this.h()},l(s){e=R(s,"DIV",{class:!0});var m=L(e);n=R(m,"DIV",{class:!0});var p=L(n);o&&o.l(p),p.forEach($),m.forEach($),this.h()},h(){S(n,"class","svelte-1adcpsd"),S(e,"class","outer svelte-1adcpsd")},m(s,m){b(s,e,m),y(e,n),~t&&i[t].m(n,null),u=!0},p(s,[m]){let p=t;t=c(s),t===p?~t&&i[t].p(s,m):(o&&(B(),h(i[p],1,1,()=>{i[p]=null}),N()),~t?(o=i[t],o?o.p(s,m):(o=i[t]=r[t](s),o.c()),v(o,1),o.m(n,null)):o=null)},i(s){u||(v(o),u=!0)},o(s){h(o),u=!1},d(s){s&&$(e),~t&&i[t].d()}}}function Oe(a,e,n){var t=(_=>(_[_.Landing=0]="Landing",_[_.CredentialingHost=1]="CredentialingHost",_[_.CredentialingGuest=2]="CredentialingGuest",_[_.HostGenerating=3]="HostGenerating",_))(t||{});let o,u=!1,r={imageURL:"",imagePrompt:""};ce.subscribe(_=>{_!=u&&(u=_,u&&(console.log("Connected to server received. Sending setup complete message"),c==2?i("guestSetupComplete",{roomCode:o}):c==3?i("hostSetupComplete",{mainGeneration:r}):console.log("ERROR Connected to server received, but not in a state to send setup complete message")))});const i=q();let c=0;function s(_){console.log("1. Host setup complete. Main Generation."),console.log(_),r=_,console.log(r),u?console.log("ERROR - completeHostSetup called when already connected to server"):X()}function m(){console.log("1. Guest setup complete"),u?console.log("ERROR - completeGuestSetup called when already connected to server"):X()}function p(_){x.set(_.apikey),ne.set(_.username),c==2?(K.set(!1),m()):(n(1,c=3),K.set(!0),fe.set(_.username))}const d=()=>{n(1,c=t.CredentialingHost)};function k(_){o=_,n(0,o)}return[o,c,t,s,p,d,k,()=>{n(1,c=t.CredentialingGuest)},_=>{p(_.detail)},_=>{s(_.detail)}]}class Ve extends D{constructor(e){super(),O(this,e,Oe,De,V,{})}}function Be(a){let e,n;return e=new _e({}),{c(){G(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){w(e,t,o),n=!0},p:T,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Ne(a){let e,n;return e=new $e({}),e.$on("started",a[3]),{c(){G(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){w(e,t,o),n=!0},p:T,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Ae(a){let e,n,t,o,u,r,i,c;const s=[Ne,Be],m=[];function p(d,k){return d[1]?0:1}return r=p(a),i=m[r]=s[r](a),{c(){e=C("div"),n=C("h1"),t=P("Room number: "),o=P(a[0]),u=M(),i.c(),this.h()},l(d){e=R(d,"DIV",{class:!0});var k=L(e);n=R(k,"H1",{});var l=L(n);t=H(l,"Room number: "),o=H(l,a[0]),l.forEach($),u=U(k),i.l(k),k.forEach($),this.h()},h(){S(e,"class","outer svelte-6ifd07")},m(d,k){b(d,e,k),y(e,n),y(n,t),y(n,o),y(e,u),m[r].m(e,null),c=!0},p(d,[k]){(!c||k&1)&&re(o,d[0]);let l=r;r=p(d),r===l?m[r].p(d,k):(B(),h(m[l],1,1,()=>{m[l]=null}),N(),i=m[r],i?i.p(d,k):(i=m[r]=s[r](d),i.c()),v(i,1),i.m(e,null))},i(d){c||(v(i),c=!0)},o(d){h(i),c=!1},d(d){d&&$(e),m[r].d()}}}function Ke(a,e,n){let t=!0,{roomCode:o=""}=e;K.subscribe(i=>{});function u(){pe(),n(1,t=!1)}me.subscribe(i=>{i&&n(1,t=!1)}),se(()=>{setInterval(()=>{},3e3)});const r=()=>{u()};return a.$$set=i=>{"roomCode"in i&&n(0,o=i.roomCode)},[o,t,u,r]}class qe extends D{constructor(e){super(),O(this,e,Ke,Ae,V,{roomCode:0})}}function Fe(a){let e,n;return e=new qe({props:{roomCode:a[1]}}),{c(){G(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){w(e,t,o),n=!0},p(t,o){const u={};o&2&&(u.roomCode=t[1]),e.$set(u)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function We(a){let e,n;return e=new Ve({}),e.$on("guestSetupComplete",a[5]),e.$on("hostSetupComplete",a[6]),{c(){G(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,o){w(e,t,o),n=!0},p:T,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Je(a){let e,n;return{c(){e=C("h1"),n=P("Setting up room..."),this.h()},l(t){e=R(t,"H1",{class:!0});var o=L(e);n=H(o,"Setting up room..."),o.forEach($),this.h()},h(){S(e,"class","svelte-1m2yimu")},m(t,o){b(t,e,o),y(e,n)},p:T,i:T,o:T,d(t){t&&$(e)}}}function ze(a){let e,n,t,o,u;const r=[Je,We,Fe],i=[];function c(s,m){return s[0]==s[2].SettingUpRoom?0:s[0]==s[2].Landing?1:s[0]==s[2].InRoom?2:-1}return~(t=c(a))&&(o=i[t]=r[t](a)),{c(){e=C("div"),n=C("div"),o&&o.c(),this.h()},l(s){e=R(s,"DIV",{class:!0});var m=L(e);n=R(m,"DIV",{class:!0});var p=L(n);o&&o.l(p),p.forEach($),m.forEach($),this.h()},h(){S(n,"class","svelte-1m2yimu"),S(e,"class","outer svelte-1m2yimu")},m(s,m){b(s,e,m),y(e,n),~t&&i[t].m(n,null),u=!0},p(s,[m]){let p=t;t=c(s),t===p?~t&&i[t].p(s,m):(o&&(B(),h(i[p],1,1,()=>{i[p]=null}),N()),~t?(o=i[t],o?o.p(s,m):(o=i[t]=r[t](s),o.c()),v(o,1),o.m(n,null)):o=null)},i(s){u||(v(o),u=!0)},o(s){h(o),u=!1},d(s){s&&$(e),~t&&i[t].d()}}}function je(a,e,n){var t=(l=>(l[l.SettingUpRoom=0]="SettingUpRoom",l[l.Landing=1]="Landing",l[l.InRoom=2]="InRoom",l))(t||{});let o=1,u="",r="",i="",c="";ee.subscribe(l=>{console.log("Main gen prompt changed to: "+l),i=l}),te.subscribe(l=>{console.log("Main gen URL changed to: "+l),c=l}),ne.subscribe(l=>{r=l}),Z.subscribe(l=>{u.length==0&&n(1,u=l)});function s(l){console.log("Request Server for room. MainGen URL: "+c+" MainGen Prompt: "+i),ge(r,c,i),setTimeout(()=>{Z.set("0451")},1e3)}function m(l){console.log("Setup host room"),console.log(l),n(0,o=0),s(),n(0,o=2)}function p(l){n(0,o=0),n(1,u=l),de(r,l),n(0,o=2)}return[o,u,t,m,p,l=>{p(l.detail.roomCode)},l=>{m(l.detail)}]}class Ze extends D{constructor(e){super(),O(this,e,je,ze,V,{})}}export{Ze as default};
